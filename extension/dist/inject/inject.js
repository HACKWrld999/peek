(()=>{var Ae=Object.create,O=Object.defineProperty,ue=Object.getPrototypeOf,fe=Object.prototype.hasOwnProperty,de=Object.getOwnPropertyNames,xe=Object.getOwnPropertyDescriptor;var pe=e=>O(e,"__esModule",{value:!0});var he=(e,r)=>()=>(r||(r={exports:{}},e(r.exports,r)),r.exports);var be=(e,r,s)=>{if(r&&typeof r=="object"||typeof r=="function")for(let g of de(r))!fe.call(e,g)&&g!=="default"&&O(e,g,{get:()=>r[g],enumerable:!(s=xe(r,g))||s.enumerable});return e},we=e=>e&&e.__esModule?e:be(pe(O(e!=null?Ae(ue(e)):{},"default",{value:e,enumerable:!0})),e);var X=he((F,Q)=>{(function(e,r){if(typeof define=="function"&&define.amd)define("webextension-polyfill",["module"],r);else if(typeof F!="undefined")r(Q);else{var s={exports:{}};r(s),e.browser=s.exports}})(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:F,function(e){"use strict";if(typeof browser=="undefined"||Object.getPrototypeOf(browser)!==Object.prototype){let r="The message port closed before a response was received.",s="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",g=o=>{let l={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(l).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class i extends WeakMap{constructor(t,m=void 0){super(m);this.createItem=t}get(t){return this.has(t)||this.set(t,this.createItem(t)),super.get(t)}}let b=n=>n&&typeof n=="object"&&typeof n.then=="function",k=(n,t)=>(...m)=>{o.runtime.lastError?n.reject(o.runtime.lastError):t.singleCallbackArg||m.length<=1&&t.singleCallbackArg!==!1?n.resolve(m[0]):n.resolve(m)},w=n=>n==1?"argument":"arguments",le=(n,t)=>function(c,...u){if(u.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${w(t.minArgs)} for ${n}(), got ${u.length}`);if(u.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${w(t.maxArgs)} for ${n}(), got ${u.length}`);return new Promise((d,x)=>{if(t.fallbackToNoCallback)try{c[n](...u,k({resolve:d,reject:x},t))}catch(a){console.warn(`${n} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,a),c[n](...u),t.fallbackToNoCallback=!1,t.noCallback=!0,d()}else t.noCallback?(c[n](...u),d()):c[n](...u,k({resolve:d,reject:x},t))})},$=(n,t,m)=>new Proxy(t,{apply(c,u,d){return m.call(u,n,...d)}}),P=Function.call.bind(Object.prototype.hasOwnProperty),q=(n,t={},m={})=>{let c=Object.create(null),u={has(x,a){return a in n||a in c},get(x,a,p){if(a in c)return c[a];if(!(a in n))return;let A=n[a];if(typeof A=="function")if(typeof t[a]=="function")A=$(n,n[a],t[a]);else if(P(m,a)){let y=le(a,m[a]);A=$(n,n[a],y)}else A=A.bind(n);else if(typeof A=="object"&&A!==null&&(P(t,a)||P(m,a)))A=q(A,t[a],m[a]);else if(P(m,"*"))A=q(A,t[a],m["*"]);else return Object.defineProperty(c,a,{configurable:!0,enumerable:!0,get(){return n[a]},set(y){n[a]=y}}),A;return c[a]=A,A},set(x,a,p,A){return a in c?c[a]=p:n[a]=p,!0},defineProperty(x,a,p){return Reflect.defineProperty(c,a,p)},deleteProperty(x,a){return Reflect.deleteProperty(c,a)}},d=Object.create(n);return new Proxy(d,u)},I=n=>({addListener(t,m,...c){t.addListener(n.get(m),...c)},hasListener(t,m){return t.hasListener(n.get(m))},removeListener(t,m){t.removeListener(n.get(m))}}),U=!1,W=new i(n=>typeof n!="function"?n:function(m,c,u){let d=!1,x,a=new Promise(C=>{x=function(h){U||(console.warn(s,new Error().stack),U=!0),d=!0,C(h)}}),p;try{p=n(m,c,x)}catch(C){p=Promise.reject(C)}let A=p!==!0&&b(p);if(p!==!0&&!A&&!d)return!1;let y=C=>{C.then(h=>{u(h)},h=>{let L;h&&(h instanceof Error||typeof h.message=="string")?L=h.message:L="An unexpected error occurred",u({__mozWebExtensionPolyfillReject__:!0,message:L})}).catch(h=>{console.error("Failed to send onMessage rejected reply",h)})};return y(A?p:a),!0}),me=({reject:n,resolve:t},m)=>{o.runtime.lastError?o.runtime.lastError.message===r?t():n(o.runtime.lastError):m&&m.__mozWebExtensionPolyfillReject__?n(new Error(m.message)):t(m)},j=(n,t,m,...c)=>{if(c.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${w(t.minArgs)} for ${n}(), got ${c.length}`);if(c.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${w(t.maxArgs)} for ${n}(), got ${c.length}`);return new Promise((u,d)=>{let x=me.bind(null,{resolve:u,reject:d});c.push(x),m.sendMessage(...c)})},ce={runtime:{onMessage:I(W),onMessageExternal:I(W),sendMessage:j.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:j.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},D={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return l.privacy={network:{"*":D},services:{"*":D},websites:{"*":D}},q(o,ce,l)};if(typeof chrome!="object"||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");e.exports=g(chrome)}else e.exports=browser})});function H(e,r){for(var s=0,g=e.length;s<g;s++)if(!r(e[s],s,e))return!1;return!0}"use strict";var E="/",T=0,z=1,G=2,B=3,R=47,ke=58,Ee=42,ve=63;function V(e){if(e===E)return e;e.charCodeAt(0)===R&&(e=e.substring(1));var r=e.length-1;return e.charCodeAt(r)===R?e.substring(0,r):e}function Y(e){return(e=V(e))===E?[E]:e.split(E)}function K(e,r,s){return s=e[s],r.val===s&&r.type===T||(s===E?r.type>z:r.type!==T&&(s||"").endsWith(r.end))}function Z(e,r){for(var s=0,g,o=Y(e),l=o.length,i,b=K.bind(K,o);s<r.length;s++)if(g=r[s],((i=g.length)===l||i<l&&g[i-1].type===G||i>l&&g[i-1].type===B)&&H(g,b))return g;return[]}function v(e){if(e===E)return[{old:e,type:T,val:e,end:""}];for(var r,s,g,o,l=V(e),i=-1,b=0,k=l.length,w=[];++i<k;)if(r=l.charCodeAt(i),r===ke){for(b=i+1,g=z,s=0,o="";i<k&&l.charCodeAt(i)!==R;)r=l.charCodeAt(i),r===ve?(s=i,g=B):r===46&&o.length===0&&(o=l.substring(s=i)),i++;w.push({old:e,type:g,val:l.substring(b,s||i),end:o}),l=l.substring(i),k-=i,i=0;continue}else if(r===Ee){w.push({old:e,type:G,val:l.substring(i),end:""});continue}else{for(b=i;i<k&&l.charCodeAt(i)!==R;)++i;w.push({old:e,type:T,val:l.substring(b,i),end:""}),l=l.substring(i),k-=i,i=b=0}return w}function J(e,r){for(var s=0,g,o,l=Y(e),i={};s<r.length;s++)g=l[s],o=r[s],g!==E&&g!==void 0&&o.type|B===2&&(i[o.val]=g.replace(o.end,""));return i}var M=we(X()),f;(function(e){e[e.root=0]="root",e[e.rootFile=1]="rootFile",e[e.rootTree=2]="rootTree",e[e.folder=3]="folder",e[e.file=4]="file",e[e.pullRequestFiles=5]="pullRequestFiles"})(f||(f={}));var ee="popups/private-repo-instructions";function re(){return!!document.querySelector("h1 > .octicon-lock")}async function ye(){return!!await M.default.storage.sync.get(ee)}async function Se(){return await M.default.storage.sync.set({[ee]:!0})}var Ce=`
<svg
  aria-hidden="true"
  focusable="false"
  height=18
  width=12
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 384 512"
  class="icon-peek"
>
  <path
    fill="currentColor"
    d="M186.1.09C81.01 3.24 0 94.92 0 200.05v263.92c0 14.26 17.23 21.39 27.31 11.31l24.92-18.53c6.66-4.95 16-3.99 21.51 2.21l42.95 48.35c6.25 6.25 16.38 6.25 22.63 0l40.72-45.85c6.37-7.17 17.56-7.17 23.92 0l40.72 45.85c6.25 6.25 16.38 6.25 22.63 0l42.95-48.35c5.51-6.2 14.85-7.17 21.51-2.21l24.92 18.53c10.08 10.08 27.31 2.94 27.31-11.31V192C384 84 294.83-3.17 186.1.09zM128 224c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm128 0c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"
    class=""
  ></path>
</svg>`,se=new WeakMap;async function _(e){if(e.innerHTML=`
    ${Ce}
    <span class="btn-peek-title">${Pe}</span>
  `,!re())return;let r=e.getAttribute("href");r.includes("?")?r.includes("noCDN")||(r+="&noCDN",e.setAttribute("href",r)):(r+="?noCDN",e.setAttribute("href",r)),!(se.has(e)||N)&&(se.set(e,!0),e.addEventListener("click",Te,{once:!0,passive:!0}))}var ne=v("/:owner/:repo"),te=v("/:owner/:repo/tree/:ref"),ie=v("/:owner/:repo/tree/:ref/*"),oe=v("/:owner/:repo/blob/:ref/:filename"),ae=v("/:owner/:repo/blob/:ref/*"),ge=v("/:owner/:repo/pull/:pullRequestID/files"),Re=[ne,te,ie,ge,oe,ae];function S(){let e=Z(location.pathname,Re),r;switch(e){case ne:{r=0;break}case te:{r=2;break}case ae:case ie:{r=4,document.querySelector("#files")&&(r=3);break}case oe:{r=1,document.querySelector("#files")&&(r=3);break}case ge:{r=5;break}}let s=J(location.pathname,e);s.path=s["*"],delete s["*"],Me(r,s)}var Pe="Peek",N=!1,Ne="https://github.com/Jarred-Sumner/1-click-from-github-to-editor/blob/main/PRIVATE-REPOSITORIES.md#L1";async function Te(){!re()||N||(await ye()&&(window.open(Ne,"_blank"),await Se(),N=!0),N=!0)}function Me(e,r){switch(e){case 2:case 0:{if(e===0){let l=document.querySelector("#branch-select-menu .btn .css-truncate-target");l&&(r.ref=l.textContent)}let o=document.querySelector(".file-navigation get-repo");if(o&&!document.querySelector(".DEDUPE_git-peek-repo")){var s=document.createElement("a");s.className="btn DEDUPE_git-peek-repo btn-peek btn-peek--spaced",r.ref?s.href="git-peek://"+location.origin+`/${r.owner}/${r.repo}/tree/${r.ref}`:s.href="git-peek://"+location.origin+location.pathname,_(s),o.parentElement.insertBefore(s,o)}break}case 3:{let o=document.querySelector('.btn[data-hotkey="t"]');if(o&&!document.querySelector(".DEDUPE_git-peek-repo")){var s=document.createElement("a");s.className="btn DEDUPE_git-peek-repo btn-peek",r.ref?s.href="git-peek://"+location.origin+`/${r.owner}/${r.repo}/tree/${r.ref}`:s.href="git-peek://"+location.origin+location.pathname,s.style.marginRight="8px",_(s),o.parentElement.insertBefore(s,o)}break}case 1:case 4:{let o=document.querySelector(".BtnGroup");if(o&&!document.querySelector(".DEDUPE_git-peek-file")){var g=document.createElement("div");g.className="BtnGroup";var s=document.createElement("a");s.className="btn btn-sm DEDUPE_git-peek-file btn-peek",s.href="git-peek://"+window.location.href,s.style.marginRight="8px",g.appendChild(s),_(s),o.parentElement.prepend(g)}break}case 5:{for(let o of document.querySelectorAll(".file-header")){let l;o.querySelector(".octicon.octicon-file")?l=o.querySelector(".octicon.octicon-file").closest(".BtnGroup"):l=o.querySelector(".js-toggle-user-reviewed-file-form");let i=o.querySelector('*[data-ga-click="View file, click, location:files_changed_dropdown"]')?.getAttribute("href");if(l&&i&&!o.querySelector(".DEDUPE_git-peek-fileaction")){var g=document.createElement("div");g.className="BtnGroup";var s=document.createElement("a");s.className="btn btn-sm DEDUPE_git-peek-fileaction btn-peek",i.startsWith("/")&&(i=location.origin+i),s.href="git-peek://"+i,s.style.marginRight="8px",g.appendChild(s),_(s),l.parentElement.prepend(g)}}break}}}window.addEventListener("DOMContentLoaded",()=>requestAnimationFrame(S));window.addEventListener("popstate",()=>requestAnimationFrame(S));window.addEventListener("replaceState",()=>requestAnimationFrame(S));requestAnimationFrame(S);setTimeout(S,100);M.default.runtime.onMessage.addListener(()=>{requestAnimationFrame(S)});})();
